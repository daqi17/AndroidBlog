## TCP/IP模型

![](C:\Users\deling\Desktop\TCPIP模型\TCPIP模型.png)

### 硬件（物理层）

> 负责数据传输

​		TCP/IP是在网络互连的设备之间能够通信的前提下才被提出的协议。

### 网络接口层（数据链路层）

> 网络接口层利用以太网中的数据链路层进行通信。

可把它当做让NIC起作用的“数据驱动”。驱动程序是在操作系统与硬件之间起桥梁作用的软件。

### 互联网层（网络层）

TCP/IP模型中的互联网层和传输层的功能通常由操作系统提供。

互联网层使用IP协议，相当于OSI模型中的第3层网络层。连接互联网的所有主机跟路由器必须都实现IP的功能。

#### IP

> IP是跨越网络传送数据报，使整个互联网都能收到数据的协议。
>
> IP协议基于IP地址转发分包数据。
>
> ​	IP属于无连接的、非可靠传输的协议。

#### ICMP（Internet控制报文协议）

> 依托于IP协议，用于在IP主机、路由器之间传递控制消息。
>
> 控制消息是指网络通不通、主机是否可达、路由是否可用等网络本身的消息。这些控制消息虽然并不传输用户数据，但是对于用户数据的传递起着重要的作用。

例如：

​		IP数据包在发送途中一旦发生异常导致无法到达对端目标地址时，需要给发送端发生一个发生异常的通知。

#### ARP

> 从分组数据包的IP地址中解析出物理地址（MAC地址）的一种协议

### 传输层

> 主要是能够让应用程序之间实现通信。
>
> 使用端口号对应用程序进行标识。

#### TCP

> 一种面向有连接的传输层协议。
>
> 保证两端通信主机之间的通信可达。

TCP能够正确处理在传输过程中丢包、传输顺序乱掉等异常情况。此外，TCP还能够有效利用带宽，缓解网络拥堵。

#### UDP

> 一种面向无连接的传输层协议。
>
> UDP不会关注对端是否真的收到了传送过去的数据。

UDP常用语分组数据较小或多播、广播通信以及视频通信等多媒体领域。

### 应用层（会话层以上的分层）

在TCP/IP模型中，将OSI参考模型中的会话层、表示层和应用层的功能都集中到了应用程序中实现。

TCP/IP应用的框架绝大多数属于客户端/服务端模型。提供服务的程序叫服务端，接受服务的程序叫客户端。

## TCP/IP分层模型与通信示例

### 数据包首部

![](C:\Users\deling\Desktop\TCPIP模型\微信截图_20200608120217.png)

​		每个分层中，都会对所发送的数据附加一个首部，在这个首部中包含了该层必要的信息。

​		通常，为协议提供的信息为包首部，所要发送的内容为数据。在下一层的角度看，从上一分层收到的包全部都被认为是本层的数据。

### 发送数据包

![](C:\Users\deling\Desktop\TCPIP模型\发送数据包.png)

### 经过数据链路的包

![](C:\Users\deling\Desktop\TCPIP模型\帧结构.png)

​		分组数据包流动时，从前往后依次被附加了以太网包首部、IP首部、TCP包首部(或UDP包首部)以及应用自己的包首部和数据。		

经过每个协议分层时，都必须有识别分组数据包发送端和接收端的信息。以太网会用MAC地址，IP会用IP地址，而TCP/UDP则会用端口号作为识别两端主机的地址。

​		此外，每一个分层的包首部中还包含一个识别位，用来标识上一层协议的种类信息。