[TOC]



## OSI 7层模型

![](https://github.com/daqi17/AndroidBlog/blob/master/img/%E7%BD%91%E7%BB%9C/OSI/OSI%E4%B8%83%E5%B1%821.png)

### 应用层

> 为应用程序提供服务并规定应用程序中通信相关的细节。

### 表示层

> 主要负责数据格式的转换。
>
> 将应用处理的信息转换为适合网络传输的格式，或将来自下一层的数据转换为上层能够处理的格式。
>
> 表示层和表示层之间为了识别编码格式也会附加首部信息，从而将实际传输的数据转交给下一层处理。

例如：

​		将文字转换为“统一的网络数据格式”（例如根据UTF-8,GBK等编码格式进行转换）。

​		如果未按特定格式编码，那么接收端就算收到邮件，也可能会乱码。

### 会话层

> 负责建立和断开通信连接（数据流动的逻辑通路），以及数据的分割等数据传输相关的管理。

​		会话层只会对何时建立连接、何时发送数据等问题进行管理，并不具有实际传输数据的功能。会话层负责决定建立连接和断开连接的时机，而传输层进行实际的建立和断开处理。

### 传输层

> 确保数据传输的可靠性。
>
> 正确传输数据的处理。
>
> 只在通信双方节点上进行处理，而无需在路由器上处理。

### 网络层

> 将数据传输到目标地址，主要负责寻址和路由选择。
>
> 目标地址可以是多个网络通过路由器连接而成的某一个地址。

### 数据链路层

> 负责物理层面上互连的、节点之间的通信传输。
>
> 将0、1序列划分为具有意义的数据帧传送给对端（数据帧的生成与接收）

​		网络层负责将整个数据发送给最终目标地址，而数据链路层则只负责发送一个分段内的数据。

### 物理层

> 负责0、1比特流（0、1序列）与电压的高低、光的闪灭之间的互换。

## 网络构成要素

![](https://github.com/daqi17/AndroidBlog/blob/master/img/%E7%BD%91%E7%BB%9C/OSI/%E7%BD%91%E7%BB%9C%E6%9E%84%E6%88%90%E8%A6%81%E7%B4%A0.png)

|        设备        |               作用               |
| :----------------: | :------------------------------: |
|        网卡        |        使计算机连网的设备        |
|       中继器       |     从物理层上延长网络的设备     |
|  网桥 / 2层交换机  |   从数据链路层上延长网络的设备   |
| 路由器 / 3层交换机 |   通过网络层转发分组数据的设备   |
|   4 ~ 7 层交换机   | 处理传输层以上各层网络传输的设备 |

### 传输速率 与 吞吐量

> 传输速率指单位时间内传输的数据量有多少。
>
> 主机之间实际的传输速率被称作吞吐量。但吞吐量这个词不仅衡量带宽，同时也衡量主机的CPU处理能力、网络的拥堵程度、报文中数据字段的占有份额(不含报文首部，只计算数据字段本身)的信息。

传输速率又称作带宽，带宽越大网络传输能力越强。

### 中继器

> 中继器是对减弱的信号进行放大和发送的设备。
>
> 中继器无法改变传输速度。
>

​		即便在数据链路层出现某些错误，中继器仍然转发数据。

​		通过中继器而进行的网络延长，其距离并非可以无限扩大。10Mbps的以太网最多可以用4个中继器分段连接；而一个100Mbps的以太网则最多只能连两个中继器。

​		有些中继器可以提供多个端口服务，这种中继器被称作为中继集线器或集线器。中继集线器也可以简称为集线器或Hub.

### 网桥 / 2层交换机

> 网桥根据数据帧的内容转发数据给**相邻**的其他网络
>
> 网桥没有连接网段个数的限制
>
> 网桥基本上只用于连接相同类型的网络。但是有时也可以连接传输速率不同的网络。

数据链路的数据帧中有一个数据位叫做FCS(帧校验序列（帧尾）),用以校验数据是否受到破坏。

* FCS用CRC（循环冗余校验码）方式校验数据帧中的位。
* 俗称帧尾，即计算机网络数据链路层的协议数据单元（帧）的尾部字段，是一段4个字节的循环冗余校验码。
* 源节点发送数据帧时，由帧的帧头和数据部分计算得出FCS，目的节点接收到后，用同样的方式再计算一遍FCS，如果与接收到的FCS不同，则认为帧在传输过程中发生了错误，从而选择丢弃这个帧。

​		有时由于噪音导致通信传输当中数据信号越来越弱，CRC正式用来校验数据帧是否因此而受到破坏的。网桥会通过检查FCS,将那些损坏的数据丢掉，从而避免发送给其他的网段。

​		交换集线器（Hub）也属于网桥的一种。交换集线器中连接电缆的每个端口都能提供类似网桥的功能。

### 路由器 / 3层交换机

> 路由器是网络层上连接两个网络、并对分组报文进行转发的设备。
>
> 可以将分组报文发送给另一个目标路由器地址。

​		网桥是根据Mac地址进行处理，而路由器 / 3层交换机 则根据IP地址进行处理的。Mac地址寻址参考的表叫做**地址转发表**，IP地址寻址中所参考的表叫做**路由控制表**。

​		路由器可以连接不同的数据链路。基本上可以连接任意两个数据链路。

### 4 ~7 层路由器

> 4 ~7 层交换机就是以TCP等协议的传输层及其上面的应用层为基础，分析收发数据，并对其进行特定的处理。

例如：

​	对于访问量非常大的企业级Web站点，通常会架设多台服务器来分担。为了能通过同一个URL将前端访问分发到后台多个服务器上，可以在这些服务器的前端加一个负载均衡器。(还可以通过DNS实现负载均衡。通过对多个IP地址的配置同一个名字，每次查询到这个名字的客户得到其中的某一个地址，从而使不同客户访问不同的服务器。该方法也称为循环复用DNS技术)。

### 网关

> 网关负责协议的转换和数据的转发。
>
> 网关是OSI参考模型中负责将从传输层到应用层的数据进行转换和转发的设备。

​		防火墙属于一款通过网关通信，针对不同应用提高安全性的产品。

## 参考资料

[《图解TCP/IP》](https://github.com/daqi17/AndroidBlog/blob/master/%E7%94%B5%E5%AD%90%E4%B9%A6/%E3%80%8A%E5%9B%BE%E8%A7%A3TCP%20IP(%E7%AC%AC5%E7%89%88).pdf)

