[TOC]



## 数据链路层

​		计算机以0、1来表示信息，然而实际的通信媒介之间处理的却是电压的高低、光的闪灭以及电波的强弱等信号。把这些信号与二进制的0、1进行转换的是物理层的责任。

​		数据链路层处理的数据也不是单纯的0、1序列，该层把它们集合为一个叫做“帧”的块，然后再进行传输。

### 网络拓扑

​		网络的连接和构成的形态称为网络拓扑。网络拓扑包括总线型、环形、星型、网状型等。

​		拓扑一词不仅用于直观可见的配线方式上，也用于逻辑上网络的组成结构。

![]([https://github.com/daqi17/AndroidBlog/blob/master/img/%E7%BD%91%E7%BB%9C/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.png](https://github.com/daqi17/AndroidBlog/blob/master/img/网络/数据链路/网络拓扑.png))

## 数据链路相关技术

### MAC地址

> MAC地址用于识别数据链路中互连的节点。
>
> MAC地址一般会被烧到ROM中。任何一个网卡的MAC地址都是唯一的。

### 共享介质型网络

> 共享介质型网络指由多个设备共享一个通信介质的一种网络。
>

设备之间使用同一个载波信道进行发送和接收。

基本采用半双工通信方式，并有必要对介质进行访问控制。

#### 载波监听多路访问（CSMA）

> 网络中的各个站（即节点）采用先到先得的方式占用信道发送数据。

​		如果多个站同时发送帧，则会产生冲突现象，也会导致网络拥堵与性能下降。

![]([https://github.com/daqi17/AndroidBlog/blob/master/img/%E7%BD%91%E7%BB%9C/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF/%E8%BD%BD%E6%B3%A2%E7%9B%91%E5%90%AC%E5%A4%9A%E8%B7%AF%E8%AE%BF%E9%97%AE.png](https://github.com/daqi17/AndroidBlog/blob/master/img/网络/数据链路/载波监听多路访问.png))

​		改良的CSMA：CSMA/CD，要求每个站提前检查冲突，一旦冲突，则尽早释放信道。工作原理如下：

* 如果载波信道是没有数据流动，则任何站都可以发送数据。
* 检查是否会发送冲突。一旦发生冲突，放弃发送数据，同时立即释放载波信道。
* 放弃发送以后，随机延时一段时间，再重新争用介质，重新发送帧。

#### 令牌传递方式

> 令牌传递方式是沿着令牌环发送一种叫做“令牌”的特殊报文，用于控制传输。
>
> 只有获得令牌的站才能发送数据。

​		当一个站没有收到令牌前不能发送数据帧，网络不太拥堵的情况下数据链路的利用率也就达不到100%。为了尽可能提高网络性能，衍生出多种令牌传递的技术。（如：令牌追加、令牌释放以及多个令牌同时循环等）

![](https://github.com/daqi17/AndroidBlog/blob/master/img/%E7%BD%91%E7%BB%9C/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF/%E4%BB%A4%E7%89%8C.png)

### 非共享介质型网络

> 非共享介质网络是指不共享介质，是对介质采取专用的一种传输控制方式。

网络中的每个站直连交换机，由交换机负责转发数据帧。一旦交换机发送故障，与之相连的所有计算机之间都将无法通信。

发送端与接收端并不共享通信介质，因此属于全双工通信方式。

#### 半双工与全双工

半双工是指，只发送或只接收的通信方式。

全双工是指，同时发送和接收的通信方式。

#### 根据MAC地址进行转发





#### VLAN

`背景：进行网络管理的时候，时常会遇到分散网络负载、变换部署网络设备的位置等情况。这意味着管理员有时不得不对网络的硬件线路进行修改。`

使用VLAN技术就不用修改实际网络布线，只需修改网络的结构即可。

> 交换机按照其端口区分多个网段，从而区分广播数据传播的范围、减少网络负载并提高网络的安全性。

然而异构的两个网段之间，需要利用具有路由功能的交换机（如3层交换机），或在各段中间通过路由器的连接才能实现通信。

![](https://github.com/daqi17/AndroidBlog/blob/master/img/%E7%BD%91%E7%BB%9C/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF/VLAN.png)

#### TAG VLAN

> TAG VLAN中每个网段都用一个VLAN ID的标签进行唯一标识。

在交换机中传输帧时，在以太网首部加入VID标签，根据这个值决定数据帧发送给哪个网段。

![](https://github.com/daqi17/AndroidBlog/blob/master/img/%E7%BD%91%E7%BB%9C/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF/VLAN2.png)

## 以太网帧格式

​		以太网前端有一个叫做前导码的部分，由0、1数字交替组合而成，表示一个以太网帧的开始，也是对端网卡能够确保与其同步的标志。前导码末尾是一个叫做SFD的域，他的值是“11”，这SFD之后就是以太网帧的本体。

![](https://github.com/daqi17/AndroidBlog/blob/master/img/%E7%BD%91%E7%BB%9C/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF/%E5%89%8D%E5%AF%BC%E7%A0%81.png)

​		以太网帧首部占14个字节。分别是6个字节的目标MAC地址、6个字节的源MAC地址以及2个字节的上层协议类型。

​		数据帧所能容纳的最大数据范围是46~1500个字节。帧尾是一个叫FCS的4个字节。

类型表明以太网的再上一层网络协议的类型。

![](https://github.com/daqi17/AndroidBlog/blob/master/img/%E7%BD%91%E7%BB%9C/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF/%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%B8%A7%E6%A0%BC%E5%BC%8F.png)

### 比特（位）、字节、8位字节

比特（位）：

> 二进制中最小的单位。每个比特（位）的值要么是0要么是1。

字节：

>  通常8个比特构成一个字节。

8位字节

> 8个比特也被成为8位字节。（只为了强调1个字节中包含8个比特是才会使用）

## 参考资料

[《图解TCP/IP》](https://github.com/daqi17/AndroidBlog/blob/master/%E7%94%B5%E5%AD%90%E4%B9%A6/%E3%80%8A%E5%9B%BE%E8%A7%A3TCP%20IP(%E7%AC%AC5%E7%89%88).pdf)